
C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\.GITIGNORE CODE IS BELOW
frontend/my-react-app/.env
   


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\CONFIG\SETTINGS.PY CODE IS BELOW
"""
Django settings for config project.

Generated by 'django-admin startproject' using Django 6.0.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/6.0/ref/settings/
"""

from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/6.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-y36zi*ppa&awp+il_um2r3obvx$du0=hfe!1h#be%=-cqk%^qi'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = ['127.0.0.1', 'localhost']   


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'expenses',
    'corsheaders',
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    
]

ROOT_URLCONF = 'config.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'config.wsgi.application'


# Database
# https://docs.djangoproject.com/en/6.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}


# Password validation
# https://docs.djangoproject.com/en/6.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/6.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/6.0/howto/static-files/

STATIC_URL = 'static/'

#CORS_ALLOWED_ORIGINS = ["http://localhost:5173",  ]
CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
    "http://127.0.0.1:5173",
]
CORS_ALLOW_CREDENTIALS = True
SESSION_COOKIE_DOMAIN = None  # or 'localhost'
SESSION_COOKIE_SAMESITE = 'None'
SESSION_COOKIE_SECURE = False  
CSRF_COOKIE_SAMESITE = 'None'
CSRF_COOKIE_SECURE = False





C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\CONFIG\URLS.PY CODE IS BELOW
"""
URL configuration for config project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/6.0/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path,include


urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('expenses.urls')),
]


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\EXPENSES\ADMIN.PY CODE IS BELOW
from django.contrib import admin
from .models import Category, Expense

admin.site.register(Category)
admin.site.register(Expense)


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\EXPENSES\APPS.PY CODE IS BELOW
from django.apps import AppConfig


class ExpensesConfig(AppConfig):
    name = 'expenses'


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\EXPENSES\MODELS.PY CODE IS BELOW
from django.db import models
from django.contrib.auth.models import User  

class Category(models.Model):
    name = models.CharField(max_length=50)

    def __str__(self):
        return self.name
    
class Expense(models.Model):
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
    amount = models.FloatField()
    description = models.CharField(max_length=100, blank=True)
    date = models.DateField(auto_now_add=True)
    user = models.ForeignKey(User, on_delete=models.CASCADE)

    def __str__(self):
        return f"{self.user.username} - {self.category.name} - {self.amount}"


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\EXPENSES\URLS.PY CODE IS BELOW
from django.urls import path
from .views import (
    list_categories,
    login_user,
    register_user,
    logout_user,
    list_expenses,
    add_expense
)

urlpatterns = [
    path('login/', login_user),
    path('register/', register_user),
    path('logout/', logout_user),
    path('categories/', list_categories),
    path('expenses/', list_expenses),      
    path('expenses/add/', add_expense),    
]


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\EXPENSES\VIEWS.PY CODE IS BELOW
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.models import User
from django.views.decorators.csrf import ensure_csrf_cookie
from rest_framework.decorators import api_view
from rest_framework.response import Response

from .models import Expense, Category

# -----------------------------
# Authentication APIs
# -----------------------------

# Login API
@ensure_csrf_cookie  # Ensures CSRF cookie is set for session-based auth
@api_view(['POST'])
def login_user(request):
    username = request.data.get('username')
    password = request.data.get('password')
    
    user = authenticate(username=username, password=password)
    if user:
        login(request, user)
        return Response({'success': True})
    
    return Response({'success': False, 'error': 'Invalid credentials'})


# Register API
@api_view(['POST'])
def register_user(request):
    username = request.data.get('username')
    password = request.data.get('password')
    
    if User.objects.filter(username=username).exists():
        return Response({'success': False, 'error': 'Username exists'})
    
    user = User.objects.create_user(username=username, password=password)
    return Response({'success': True})


# Logout API
@api_view(['POST'])
def logout_user(request):
    logout(request)
    return Response({'success': True})


# -----------------------------
# Category APIs
# -----------------------------

# List all categories
@api_view(['GET'])
def list_categories(request):
    categories = Category.objects.all()
    data = [{"id": c.id, "name": c.name} for c in categories]
    return Response(data)


# -----------------------------
# Expense APIs
# -----------------------------

# Add a new expense
@api_view(['POST'])
def add_expense(request):
    if not request.user.is_authenticated:
        return Response({'error': 'Not authenticated'}, status=401)
    
    category_id = request.data.get('category')
    amount = request.data.get('amount')
    description = request.data.get('description', '')

    # Validate category
    try:
        category = Category.objects.get(id=category_id)
    except Category.DoesNotExist:
        return Response({'error': 'Category not found'}, status=404)

    # Create expense
    expense = Expense.objects.create(
        user=request.user,
        category=category,
        amount=amount,
        description=description
    )

    return Response({
        'success': True,
        'expense': {
            'id': expense.id,
            'category': expense.category.name,
            'amount': expense.amount,
            'description': expense.description,
            'date': expense.date
        }
    })


# List all expenses for logged-in user
@api_view(['GET'])
def list_expenses(request):
    if not request.user.is_authenticated:
        return Response({'error': 'Not authenticated'}, status=401)

    expenses = Expense.objects.filter(user=request.user)
    data = [
        {
            'id': e.id,
            'category': e.category.name,
            'amount': e.amount,
            'description': e.description,
            'date': e.date
        } 
        for e in expenses
    ]
    return Response(data)


# -----------------------------
# Task API (placeholder)
# -----------------------------

# List tasks (currently empty)
@api_view(['GET'])
def list_tasks(request):
    if not request.user.is_authenticated:
        return Response({'error': 'Not authenticated'}, status=401)
    
    return Response({
        'success': True,
        'tasks': []
    })


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\BACKEND\MANAGE.PY CODE IS BELOW
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()



C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\.ENV CODE IS BELOW
VITE_API_BASE_URL=http://127.0.0.1:8000/api


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\.GITIGNORE CODE IS BELOW
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
.env




C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\INDEX.HTML CODE IS BELOW
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>my-react-app</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\README.MD CODE IS BELOW
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\APP.JSX CODE IS BELOW
import { BrowserRouter as Router, Routes, Route, Navigate, Link } from "react-router-dom";
import RegisterPage from "./pages/Register.jsx";
import LoginPage from './pages/Login.jsx';
import CategoriesPage from "./pages/Task.jsx";
import AddExpenseForm from "./pages/Expense.jsx";
import { handleLogout } from "./services/api.jsx";

function App() {
  return (
    <Router>
      <div>
        
        <nav style={{ marginBottom: "20px" }}>
          <Link to="/categories" style={{ marginRight: "10px" }}>Categories</Link>
          <Link to="/add-expense" style={{ marginRight: "10px" }}>Add Expense</Link>
          <button onClick={handleLogout}>Logout</button>
        </nav>

        
        <Routes>
          <Route path="/" element={<Navigate to="/login" />} />
          <Route path="/register" element={<RegisterPage />} />
          <Route path="/login" element={<LoginPage />} />
          <Route path="/categories" element={<CategoriesPage />} />
          <Route path="/add-expense" element={<AddExpenseForm />} />
        </Routes>
      </div>
    </Router>
  );
}

export default App;


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\COMPONENTS\ALERT.JSX CODE IS BELOW


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\CONFIG\API.JS CODE IS BELOW

const API_BASE = import.meta.env.VITE_API_BASE_URL; 
export default API_BASE;



C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\MAIN.JSX CODE IS BELOW
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import App from './App.jsx'


createRoot(document.getElementById('root')).render(
  <StrictMode>
    <App />
  </StrictMode>,
)


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\PAGES\EXPENSE.JSX CODE IS BELOW
import React, { useState, useEffect } from 'react';
import API_BASE from '../config/api';

// Helper to get CSRF token from cookies
function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    document.cookie.split(';').forEach(cookie => {
      cookie = cookie.trim();
      if (cookie.startsWith(name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
      }
    });
  }
  return cookieValue;
}

const csrftoken = getCookie('csrftoken');

function AddExpenseForm({ onExpenseAdded }) {
  const [categories, setCategories] = useState([]);
  const [form, setForm] = useState({ category: '', amount: '', description: '' });
  const [message, setMessage] = useState('');

  // Fetch categories from backend
  useEffect(() => {
    fetch(`${API_BASE}/categories/`, { credentials: 'include' })
      .then(res => res.json())
      .then(data => setCategories(data))
      .catch(err => console.error('Failed to fetch categories:', err));
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const res = await fetch(`${API_BASE}/expenses/add/`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': csrftoken
        },
        body: JSON.stringify(form),
        credentials: 'include'
      });

      const data = await res.json();
      if (!data.success) throw new Error(data.error || 'Failed to add expense');

      setMessage('Expense added!');
      setForm({ category: '', amount: '', description: '' });

      // Inform parent component to refresh list
      if (onExpenseAdded) onExpenseAdded();
    } catch (err) {
      setMessage(err.message);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <h2>Add Expense</h2>

      <select
        value={form.category}
        onChange={e => setForm({ ...form, category: e.target.value })}
        required
      >
        <option value="">Select Category</option>
        {categories.map(c => (
          <option key={c.id} value={c.id}>{c.name}</option>
        ))}
      </select>

      <input
        type="number"
        placeholder="Amount"
        value={form.amount}
        onChange={e => setForm({ ...form, amount: e.target.value })}
        required
      />

      <input
        placeholder="Description"
        value={form.description}
        onChange={e => setForm({ ...form, description: e.target.value })}
      />

      <button type="submit">Add Expense</button>
      {message && <p>{message}</p>}
    </form>
  );
}

export default AddExpenseForm;


C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\PAGES\LOGIN.JSX CODE IS BELOW
import React, { useState } from 'react';
import API_BASE from "../config/api";

function LoginPage() {
    const [formData, setFormData] = useState({ username: '', password: '' });
    const [error, setError] = useState('');

    const handleChange = (e) => {
      setFormData({ ...formData, [e.target.name]: e.target.value });
    };

    const handleSubmit = async (e) => {
      e.preventDefault();
      try {
        const response = await fetch(`${API_BASE}/login/`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(formData),
          credentials: "include"  //<--- THIS IS FOR SESSIONS.
      });

      const data = await response.json();
      if (!data.success) throw new Error(data.error);

        window.location.href = '/tasks';
      } catch (err) {
        setError(err.message);
      }
    };


    return (
      <form onSubmit={handleSubmit}>
      <h2>Login</h2>
        <input name="username" placeholder="Username" onChange={handleChange} required />
        <input name="password" type="password" placeholder="Password" onChange={handleChange} required />
      <button type="submit">Login</button>
      {error && <p style={{ color: 'red' }}>{error}</p>}
      </form>
    );
  }

  export default LoginPage;

C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\PAGES\REGISTER.JSX CODE IS BELOW
import React, { useState } from 'react';
import API_BASE from "../config/api";

function RegisterPage() {
    const [formData, setFormData] = useState({ username: '', password: '' });
    const [message, setMessage] = useState('');

    const handleChange = (e) => {
      setFormData({ ...formData, [e.target.name]: e.target.value });
    };

    const handleSubmit = async (e) => {
      e.preventDefault();
      try {
        const response = await fetch(`${API_BASE}/register/`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData),
          credentials: "include"  // <--  THIS IS FOR SESSIONS.
      });

      const data = await response.json();
      if (!data.success) throw new Error(data.error);

        setMessage('Registration successful! Redirecting to login...');
        setTimeout(() => (window.location.href = '/login'), 1500);
      } catch (err) {
        setMessage(err.message);
      }
    };


    return (
      <form onSubmit={handleSubmit}>
      <h2>Register</h2>
        <input name="username" placeholder="Username" onChange={handleChange} required />
        <input name="password" type="password" placeholder="Password" onChange={handleChange} required />
      <button type="submit">Register</button>
      {message && <p>{message}</p>}
      </form>
    );
  }

  export default RegisterPage;

C:\USERS\SUBHA\ONEDRIVE\DESKTOP\EXPENSE-TRACKER\FRONTEND\MY-REACT-APP\SRC\PAGES\TASK.JSX CODE IS BELOW
import React, { useState, useEffect } from 'react';
import API_BASE from '../config/api';
import AddExpenseForm from './Expense.jsx';


function TasksPage() {
  const [expenses, setExpenses] = useState([]);
  const [error, setError] = useState('');

  // Fetch expenses
  const fetchExpenses = async () => {
    try {
      const res = await fetch(`${API_BASE}/expenses/`, {
        method: 'GET',
        credentials: 'include'
      });

      if (!res.ok) throw new Error('Failed to fetch expenses');

      const data = await res.json();
      setExpenses(data);
    } catch (err) {
      setError(err.message);
    }
  };

  useEffect(() => {
    fetchExpenses();
  }, []);

  return (
    <div>
      <h1>Expenses</h1>
      <AddExpenseForm onExpenseAdded={fetchExpenses} />

      {error && <p style={{ color: 'red' }}>{error}</p>}

      <ul>
        {expenses.map(e => (
          <li key={e.id}>
            {e.category} - {e.amount} - {e.description || '-'} - {e.date}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TasksPage;

import API_BASE from "../config/api";

// Register User
export const registerUser = async (userData) => {
  const res = await fetch(`${API_BASE}/register/`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(userData),
    credentials: "include"
});
const data = await res.json();
if (!data.success) throw new Error(data.error);
  return data;
};

// Login User
export const loginUser = async (credentials) => {
  const res = await fetch(`${API_BASE}/login/`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(credentials),
    credentials: "include"
});
const data = await res.json();
if (!data.success) throw new Error(data.error);
  return data;
};

// Get Categories
export const getCategories = async () => {
  const res = await fetch(`${API_BASE}/categories/`, {
    method: 'GET',
    credentials: "include"
});
if (!res.ok) throw new Error('Failed to fetch categories');
  return res.json();
};

function handleLogout() {
  fetch(`${API_BASE}/logout/`, { method: 'POST', credentials: 'include' }) // optional
    .finally(() => {
      window.location.href = '/login'; // redirect to login
    });
}

<button onClick={handleLogout}>Logout</button>

export { handleLogout };


